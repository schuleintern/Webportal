<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SchuleIntern: Upload/framework/lib/system/errorhandler.php Quellcode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SchuleIntern
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Erzeugt von Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Suchen');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Suchen');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_61632385f601d7770e35e4c8904ddc33.html">Upload</a></li><li class="navelem"><a class="el" href="dir_812cdbf44ae3e957979ea7d20d9682e9.html">framework</a></li><li class="navelem"><a class="el" href="dir_25f7db0a5a969d00f4981acb1578de3a.html">lib</a></li><li class="navelem"><a class="el" href="dir_e17ac325f9b2e89231e503323d38b56f.html">system</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">errorhandler.php</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">function</span> schuleinternerrorhandler ($code, $msg, $file, $line, $context) {</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    <span class="keywordflow">if</span>(isFatalError($code) &amp;&amp; <a class="code" href="class_d_b.html#a88339147447cac62cd91dbfe2cc4a852">DB::isDebug</a>()) {</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        <span class="comment">// Fehler anzeigen</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        ?&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        &lt;html&gt;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;            &lt;head&gt;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                &lt;title&gt;SchuleIntern Fatal Error&lt;/title&gt;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            &lt;/head&gt;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;            &lt;body&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                &lt;center&gt;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                &lt;h1&gt;FatalError Executing <a class="code" href="class_schule.html">Schule</a> Intern&lt;/h1&gt;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            </div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                &lt;table border=<span class="stringliteral">&quot;1&quot;</span> width=<span class="stringliteral">&quot;50%&quot;</span>&gt;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                    &lt;tr&gt;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                        &lt;td width=<span class="stringliteral">&quot;15%&quot;</span>&gt;Code&lt;/td&gt;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                        &lt;td&gt;&lt;?php echo($code); ?&gt;&lt;/td&gt;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                    &lt;/tr&gt;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                    &lt;tr&gt;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                        &lt;td width=<span class="stringliteral">&quot;15%&quot;</span>&gt;Nachricht&lt;/td&gt;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                        &lt;td&gt;&lt;?php echo($msg); ?&gt;&lt;/td&gt;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                    &lt;/tr&gt;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                    &lt;tr&gt;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                        &lt;td width=<span class="stringliteral">&quot;15%&quot;</span>&gt;Datei&lt;/td&gt;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                        &lt;td&gt;&lt;?php echo($file); ?&gt;&lt;/td&gt;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                    &lt;/tr&gt;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                    &lt;tr&gt;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                        &lt;td width=<span class="stringliteral">&quot;15%&quot;</span>&gt;Zeile&lt;/td&gt;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                        &lt;td&gt;&lt;?php echo($line); ?&gt;&lt;/td&gt;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                    &lt;/tr&gt;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                    &lt;tr&gt;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                        &lt;td width=<span class="stringliteral">&quot;15%&quot;</span>&gt;Kontext&lt;/td&gt;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                        &lt;td&gt;&lt;pre&gt;&lt;?php print_R($context); ?&gt;&lt;/pre&gt;&lt;/td&gt;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                    &lt;/tr&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                &lt;/table&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                &lt;/center&gt;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            &lt;/body&gt;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        </div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        &lt;/html&gt;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        &lt;?php</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isFatalError($code)) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        $text = <span class="stringliteral">&quot;FatalError Executing Schule Intern</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="stringliteral">Code: $code</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral">Nachricht: $msg</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="stringliteral">Datei: $file</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="stringliteral">Zeile: $line</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="stringliteral">Kontext: &quot;</span> . print_R($context, <span class="keyword">true</span>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        </div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        $fehlerID = reportError($text);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        </div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">if</span>(substr($fehlerID,0,6) == <span class="stringliteral">&#39;ERROR_&#39;</span>) $failed = <span class="keyword">true</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">else</span> $failed = <span class="keyword">false</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        ?&gt;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        </div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;&lt;!DOCTYPE html&gt;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;&lt;html&gt;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  &lt;head&gt;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;     &lt;meta charset=<span class="stringliteral">&quot;UTF-8&quot;</span>&gt;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  </div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    &lt;title&gt;Schwerer Fehler&lt;/title&gt;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    &lt;meta content=<span class="stringliteral">&#39;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&#39;</span> name=<span class="stringliteral">&#39;viewport&#39;</span>&gt;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    &lt;link href=<span class="stringliteral">&quot;cssjs/bootstrap/css/bootstrap.min.css&quot;</span> rel=<span class="stringliteral">&quot;stylesheet&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> /&gt;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    &lt;link href=<span class="stringliteral">&quot;cssjs/font/font-awesome/css/font-awesome.min.css&quot;</span> rel=<span class="stringliteral">&quot;stylesheet&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> /&gt;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    &lt;link href=<span class="stringliteral">&quot;cssjs/font/ionicons/css/ionicons.min.css&quot;</span> rel=<span class="stringliteral">&quot;stylesheet&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> /&gt;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    &lt;link href=<span class="stringliteral">&quot;cssjs/dist/css/AdminLTE.css&quot;</span> rel=<span class="stringliteral">&quot;stylesheet&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> /&gt;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    &lt;link href=<span class="stringliteral">&quot;cssjs/plugins/iCheck/square/blue.css&quot;</span> rel=<span class="stringliteral">&quot;stylesheet&quot;</span> type=<span class="stringliteral">&quot;text/css&quot;</span> /&gt;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    &lt;!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --&gt;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    &lt;!-- WARNING: Respond.js doesn<span class="stringliteral">&#39;t work if you view the page via file:// --&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">    &lt;!--[if lt IE 9]&gt;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral">        &lt;script src=&quot;https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral">        &lt;script src=&quot;https://oss.maxcdn.com/respond/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral">    &lt;![endif]--&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">  &lt;/head&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">  &lt;body class=&quot;login-page&quot;&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral">    &lt;div class=&quot;login-box&quot;&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="stringliteral">      &lt;div class=&quot;login-logo&quot;&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">        &lt;a href=&quot;index.php&quot;&gt;&lt;img src=&quot;imagesSchool/Icon.png&quot; width=&quot;150&quot; border=&quot;0&quot;&gt;&lt;/a&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">      &lt;/div&gt;&lt;!-- /.login-logo --&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">      &lt;div class=&quot;login-box-body&quot;&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">        &lt;div class=&quot;callout callout-danger&quot;&gt;&lt;i class=&quot;fa fa-exclamation-triangle&quot;&gt;&lt;/i&gt; Fehler bei der Ausführung der Anfrage.&lt;/div&gt;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral">        &lt;p class=&quot;login-box-msg&quot;&gt;Leider ist bei der Ausführung der Software ein schwerer Fehler aufgetreten. Die Entwickler wurden über diesen Fehler automatisch informiert. Bitte versuchen Sie es nocheinmal. Falls der Fehler weiterhin besteht, wenden Sie sich bitte an den Support unter &lt;a href=&quot;https://support.schule-intern.de&quot; target=&quot;_blank&quot;&gt;https://support.schule-intern.de&lt;/a&gt;&lt;/p&gt;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">        &lt;code&gt;Technische Informationen:</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">&lt;?php echo DB::getGlobalSettings()-&gt;siteNamePlain; if(!$failed) echo (&quot;-&quot; . $fehlerID); ?&gt;&lt;/code&gt;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="stringliteral">      </span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">      &lt;/div&gt;&lt;!-- /.login-box-body --&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="stringliteral">    &lt;/div&gt;&lt;!-- /.login-box --&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="stringliteral">    </span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="stringliteral">    &lt;script src=&quot;cssjs/plugins/jQuery/jQuery-2.1.4.min.js&quot;&gt;&lt;/script&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="stringliteral">    &lt;script src=&quot;cssjs/bootstrap/js/bootstrap.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="stringliteral">    &lt;script src=&quot;cssjs/plugins/iCheck/icheck.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="stringliteral">    </span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="stringliteral">  &lt;/body&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">&lt;/html&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral">&lt;?php </span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">      exit();  </span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral">    else {</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">        // Kein fateler Fehler.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="stringliteral">    }</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="stringliteral">}</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">function isFatalError($code) {</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">    return $code == E_ERROR || $code == E_PARSE || $code == E_COMPILE_ERROR || $code == E_CORE_ERROR;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">}</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral">function reportError($text) {</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">    #</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">    # Configuration: Enter the url and key. That is it.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">    #  url =&gt; URL to api/task/cron e.g #  http://yourdomain.com/support/api/tickets.json</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">    #  key =&gt; API&#39;</span>s Key (see admin panel on how to generate a key)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="preprocessor">#</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    </div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    $config = array(</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="stringliteral">&#39;url&#39;</span>=&gt;<span class="stringliteral">&#39;https://support.schule-intern.de/api/tickets.json&#39;</span>,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="stringliteral">&#39;key&#39;</span>=&gt;<span class="stringliteral">&#39;8DCBB5245D4D8B92317E89337E0A02D7&#39;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                            );</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">    # Fill in the data for the new ticket, this will likely come from $_POST.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    </div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    $data = array(</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="stringliteral">&#39;name&#39;</span>      =&gt;      <span class="stringliteral">&#39;SchuleIntern System&#39;</span>,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="stringliteral">&#39;email&#39;</span>     =&gt;      <span class="stringliteral">&#39;systemerror@schule-intern.de&#39;</span>,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="stringliteral">&#39;subject&#39;</span>   =&gt;      <span class="stringliteral">&#39;System Fehler in Installation &#39;</span> . <a class="code" href="class_d_b.html#a0eb830294949a623b79351601949a673">DB::getGlobalSettings</a>()-&gt;siteNamePlain,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="stringliteral">&#39;message&#39;</span>   =&gt;      $text,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="stringliteral">&#39;ip&#39;</span>        =&gt;      <span class="stringliteral">&#39;93.229.83.178&#39;</span>,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="stringliteral">&#39;attachments&#39;</span> =&gt; array(),</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">    #pre-checks</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    function_exists(<span class="stringliteral">&#39;curl_version&#39;</span>) or die(&#39;CURL support required&#39;);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    function_exists(&#39;json_encode&#39;) or die(&#39;JSON support required&#39;);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    </div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="preprocessor">#set timeout</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    set_time_limit(3);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">    #curl post</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    $ch = curl_init();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    curl_setopt($ch, CURLOPT_URL, $config[<span class="stringliteral">&#39;url&#39;</span>]);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    curl_setopt($ch, CURLOPT_POST, 1);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($data));</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    curl_setopt($ch, CURLOPT_USERAGENT, <span class="stringliteral">&#39;osTicket API Client v1.7&#39;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    curl_setopt($ch, CURLOPT_HEADER, FALSE);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    curl_setopt($ch, CURLOPT_HTTPHEADER, array( <span class="stringliteral">&#39;Expect:&#39;</span>, <span class="stringliteral">&#39;X-API-Key: &#39;</span>.$config[<span class="stringliteral">&#39;key&#39;</span>]));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, FALSE);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    $result=curl_exec($ch);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    curl_close($ch);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> ($code != 201)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;ERROR_&#39;</span>.$result;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) $result;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="class_d_b_html_a0eb830294949a623b79351601949a673"><div class="ttname"><a href="class_d_b.html#a0eb830294949a623b79351601949a673">DB\getGlobalSettings</a></div><div class="ttdeci">static getGlobalSettings()</div><div class="ttdef"><b>Definition:</b> <a href="_d_b_8class_8php_source.html#l00112">DB.class.php:112</a></div></div>
<div class="ttc" id="class_d_b_html_a88339147447cac62cd91dbfe2cc4a852"><div class="ttname"><a href="class_d_b.html#a88339147447cac62cd91dbfe2cc4a852">DB\isDebug</a></div><div class="ttdeci">static isDebug()</div><div class="ttdef"><b>Definition:</b> <a href="_d_b_8class_8php_source.html#l00138">DB.class.php:138</a></div></div>
<div class="ttc" id="class_schule_html"><div class="ttname"><a href="class_schule.html">Schule</a></div><div class="ttdef"><b>Definition:</b> <a href="_schule_8class_8php_source.html#l00003">Schule.class.php:3</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Erzeugt von &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
