\hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin}{}\section{Sabre\textbackslash{}D\+AV\textbackslash{}Locks\textbackslash{}Plugin Klassenreferenz}
\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin}\index{Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin@{Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin}}
Klassendiagramm für Sabre\textbackslash{}D\+AV\textbackslash{}Locks\textbackslash{}Plugin\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin}
\end{center}
\end{figure}
\subsection*{Öffentliche Methoden}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a29c2fc50079fa2931884a63482eadebd}{\+\_\+\+\_\+construct}} (\mbox{\hyperlink{interface_sabre_1_1_d_a_v_1_1_locks_1_1_backend_1_1_backend_interface}{Backend\textbackslash{}\+Backend\+Interface}} \$locks\+Backend)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a9b8e0a4212760126df8f16671f583b6b}{initialize}} (\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_server}{D\+A\+V\textbackslash{}\+Server}} \$server)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1dfc87e58dc85f6262562fb026178238}{get\+Plugin\+Name}} ()
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a8859c5c4f2eae58c6a6285071f6a0e87}{prop\+Find}} (\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_prop_find}{D\+A\+V\textbackslash{}\+Prop\+Find}} \$prop\+Find, \mbox{\hyperlink{interface_sabre_1_1_d_a_v_1_1_i_node}{D\+A\+V\textbackslash{}\+I\+Node}} \$node)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7956ed93122098d77311dbdf79b1b90b}{get\+H\+T\+T\+P\+Methods}} (\$uri)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1a1ab5c99088be46817dccc60a4875b6}{get\+Features}} ()
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aa11d55d64b983c4dc0ee7b1a4b00fbf0}{get\+Locks}} (\$uri, \$return\+Child\+Locks=false)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7d3f1da48a8eb0d4d512b4698b332961}{http\+Lock}} (\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}} \$request, \mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_response_interface}{Response\+Interface}} \$response)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a655717abccbcd3a907e032a92ca6a57f}{http\+Unlock}} (\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}} \$request, \mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_response_interface}{Response\+Interface}} \$response)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a67c30a24ab46aeb1c02f83305726bc1c}{after\+Unbind}} (\$path)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a5207b64136f89db34b5290f1c342e603}{lock\+Node}} (\$uri, \mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} \$lock\+Info)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a20c60a46f1836df762a90b741c8672a6}{unlock\+Node}} (\$uri, \mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} \$lock\+Info)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a6f991c48301d5f0a2ccb446a63c8b8dd}{get\+Timeout\+Header}} ()
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aedbf55fbe92f575adf935b9070a43688}{validate\+Tokens}} (\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}} \$request, \&\$conditions)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_af11816cd98085097d7c55326f1660065}{get\+Plugin\+Info}} ()
\end{DoxyCompactItemize}
\subsection*{Geschützte Methoden}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_acf8e46a2928075324e4145e2b5f7c058}{generate\+Lock\+Response}} (\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} \$lock\+Info)
\item 
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aad312df12435131521a106b077616415}{parse\+Lock\+Request}} (\$body)
\end{DoxyCompactItemize}
\subsection*{Geschützte Attribute}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a291efb5a5e2c59423dd99f43a3b80721}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a291efb5a5e2c59423dd99f43a3b80721}} 
{\bfseries \$locks\+Backend}
\item 
\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a0ebff466108baca49d552a818b972776}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a0ebff466108baca49d552a818b972776}} 
{\bfseries \$server}
\end{DoxyCompactItemize}


\subsection{Ausführliche Beschreibung}
Locking plugin

This plugin provides locking support to a Web\+D\+AV server. The easiest way to get started, is by hooking it up as such\+:

\$lock\+Backend = new Sabre(\textquotesingle{}./mylockdb\textquotesingle{}); \$lock\+Plugin = new Sabre(\$lock\+Backend); \$server-\/$>$add\+Plugin(\$lock\+Plugin);

\begin{DoxyCopyright}{Copyright}
Copyright (C) fruux GmbH (\href{https://fruux.com/}{\tt https\+://fruux.\+com/}) 
\end{DoxyCopyright}
\begin{DoxyAuthor}{Autor}
Evert Pot (\href{http://evertpot.com/}{\tt http\+://evertpot.\+com/})  \href{http://sabre.io/license/}{\tt http\+://sabre.\+io/license/} Modified B\+SD License 
\end{DoxyAuthor}


Definiert in Zeile 23 der Datei Plugin.\+php.



\subsection{Beschreibung der Konstruktoren und Destruktoren}
\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a29c2fc50079fa2931884a63482eadebd}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a29c2fc50079fa2931884a63482eadebd}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}}
\index{\+\_\+\+\_\+construct@{\+\_\+\+\_\+construct}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+construct()}{\_\_construct()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::\+\_\+\+\_\+construct (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_sabre_1_1_d_a_v_1_1_locks_1_1_backend_1_1_backend_interface}{Backend\textbackslash{}\+Backend\+Interface}}}]{\$locks\+Backend }\end{DoxyParamCaption})}

\+\_\+\+\_\+construct


\begin{DoxyParams}[1]{Parameter}
Backend\textbackslash{}\+Backend\+Interface & {\em \$locks\+Backend} & \\
\hline
\end{DoxyParams}


Definiert in Zeile 44 der Datei Plugin.\+php.



\subsection{Dokumentation der Elementfunktionen}
\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a67c30a24ab46aeb1c02f83305726bc1c}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a67c30a24ab46aeb1c02f83305726bc1c}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!after\+Unbind@{after\+Unbind}}
\index{after\+Unbind@{after\+Unbind}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{after\+Unbind()}{afterUnbind()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::after\+Unbind (\begin{DoxyParamCaption}\item[{}]{\$path }\end{DoxyParamCaption})}

This method is called after a node is deleted.

We use this event to clean up any locks that still exist on the node.


\begin{DoxyParams}[1]{Parameter}
string & {\em \$path} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
void 
\end{DoxyReturn}


Definiert in Zeile 318 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_acf8e46a2928075324e4145e2b5f7c058}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_acf8e46a2928075324e4145e2b5f7c058}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!generate\+Lock\+Response@{generate\+Lock\+Response}}
\index{generate\+Lock\+Response@{generate\+Lock\+Response}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{generate\+Lock\+Response()}{generateLockResponse()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::generate\+Lock\+Response (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}}}]{\$lock\+Info }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Generates the response for successful L\+O\+CK requests


\begin{DoxyParams}[1]{Parameter}
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} & {\em \$lock\+Info} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
string 
\end{DoxyReturn}


Definiert in Zeile 394 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1a1ab5c99088be46817dccc60a4875b6}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1a1ab5c99088be46817dccc60a4875b6}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+Features@{get\+Features}}
\index{get\+Features@{get\+Features}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+Features()}{getFeatures()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+Features (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns a list of features for the H\+T\+TP O\+P\+T\+I\+O\+NS Dav\+: header.

In this case this is only the number 2. The 2 in the Dav\+: header indicates the server supports locks.

\begin{DoxyReturn}{Rückgabe}
array 
\end{DoxyReturn}


Definiert in Zeile 131 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7956ed93122098d77311dbdf79b1b90b}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7956ed93122098d77311dbdf79b1b90b}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+H\+T\+T\+P\+Methods@{get\+H\+T\+T\+P\+Methods}}
\index{get\+H\+T\+T\+P\+Methods@{get\+H\+T\+T\+P\+Methods}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+H\+T\+T\+P\+Methods()}{getHTTPMethods()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+H\+T\+T\+P\+Methods (\begin{DoxyParamCaption}\item[{}]{\$uri }\end{DoxyParamCaption})}

Use this method to tell the server this plugin defines additional H\+T\+TP methods.

This method is passed a uri. It should only return H\+T\+TP methods that are available for the specified uri.


\begin{DoxyParams}[1]{Parameter}
string & {\em \$uri} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
array 
\end{DoxyReturn}


Definiert in Zeile 117 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aa11d55d64b983c4dc0ee7b1a4b00fbf0}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aa11d55d64b983c4dc0ee7b1a4b00fbf0}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+Locks@{get\+Locks}}
\index{get\+Locks@{get\+Locks}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+Locks()}{getLocks()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+Locks (\begin{DoxyParamCaption}\item[{}]{\$uri,  }\item[{}]{\$return\+Child\+Locks = {\ttfamily false} }\end{DoxyParamCaption})}

Returns all lock information on a particular uri

This function should return an array with Sabre objects. If there are no locks on a file, return an empty array.

Additionally there is also the possibility of locks on parent nodes, so we\textquotesingle{}ll need to traverse every part of the tree If the \$return\+Child\+Locks argument is set to true, we\textquotesingle{}ll also traverse all the children of the object for any possible locks and return those as well.


\begin{DoxyParams}[1]{Parameter}
string & {\em \$uri} & \\
\hline
bool & {\em \$return\+Child\+Locks} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
array 
\end{DoxyReturn}


Definiert in Zeile 150 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_af11816cd98085097d7c55326f1660065}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_af11816cd98085097d7c55326f1660065}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+Plugin\+Info@{get\+Plugin\+Info}}
\index{get\+Plugin\+Info@{get\+Plugin\+Info}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+Plugin\+Info()}{getPluginInfo()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+Plugin\+Info (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns a bunch of meta-\/data about the plugin.

Providing this information is optional, and is mainly displayed by the Browser plugin.

The description key in the returned array may contain html and will not be sanitized.

\begin{DoxyReturn}{Rückgabe}
array 
\end{DoxyReturn}


Definiert in Zeile 579 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1dfc87e58dc85f6262562fb026178238}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a1dfc87e58dc85f6262562fb026178238}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+Plugin\+Name@{get\+Plugin\+Name}}
\index{get\+Plugin\+Name@{get\+Plugin\+Name}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+Plugin\+Name()}{getPluginName()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+Plugin\+Name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns a plugin name.

Using this name other plugins will be able to access other plugins using Sabre\+::get\+Plugin

\begin{DoxyReturn}{Rückgabe}
string 
\end{DoxyReturn}


Definiert in Zeile 80 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a6f991c48301d5f0a2ccb446a63c8b8dd}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a6f991c48301d5f0a2ccb446a63c8b8dd}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!get\+Timeout\+Header@{get\+Timeout\+Header}}
\index{get\+Timeout\+Header@{get\+Timeout\+Header}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{get\+Timeout\+Header()}{getTimeoutHeader()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::get\+Timeout\+Header (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Returns the contents of the H\+T\+TP Timeout header.

The method formats the header into an integer.

\begin{DoxyReturn}{Rückgabe}
int 
\end{DoxyReturn}


Definiert in Zeile 368 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7d3f1da48a8eb0d4d512b4698b332961}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a7d3f1da48a8eb0d4d512b4698b332961}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!http\+Lock@{http\+Lock}}
\index{http\+Lock@{http\+Lock}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{http\+Lock()}{httpLock()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::http\+Lock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}}}]{\$request,  }\item[{\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_response_interface}{Response\+Interface}}}]{\$response }\end{DoxyParamCaption})}

Locks an uri

The Web\+D\+AV lock request can be operated to either create a new lock on a file, or to refresh an existing lock If a new lock is created, a full X\+ML body should be supplied, containing information about the lock such as the type of lock (shared or exclusive) and the owner of the lock

If a lock is to be refreshed, no body should be supplied and there should be a valid If header containing the lock

Additionally, a lock can be requested for a non-\/existent file. In these case we\textquotesingle{}re obligated to create an empty file as per R\+F\+C4918\+:S7.\+3


\begin{DoxyParams}[1]{Parameter}
Request\+Interface & {\em \$request} & \\
\hline
Response\+Interface & {\em \$response} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
bool 
\end{DoxyReturn}


Definiert in Zeile 171 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a655717abccbcd3a907e032a92ca6a57f}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a655717abccbcd3a907e032a92ca6a57f}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!http\+Unlock@{http\+Unlock}}
\index{http\+Unlock@{http\+Unlock}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{http\+Unlock()}{httpUnlock()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::http\+Unlock (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}}}]{\$request,  }\item[{\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_response_interface}{Response\+Interface}}}]{\$response }\end{DoxyParamCaption})}

Unlocks a uri

This Web\+D\+AV method allows you to remove a lock from a node. The client should provide a valid locktoken through the Lock-\/token http header The server should return 204 (No content) on success


\begin{DoxyParams}[1]{Parameter}
Request\+Interface & {\em \$request} & \\
\hline
Response\+Interface & {\em \$response} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
void 
\end{DoxyReturn}


Definiert in Zeile 275 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a9b8e0a4212760126df8f16671f583b6b}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a9b8e0a4212760126df8f16671f583b6b}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!initialize@{initialize}}
\index{initialize@{initialize}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_server}{D\+A\+V\textbackslash{}\+Server}}}]{\$server }\end{DoxyParamCaption})}

Initializes the plugin

This method is automatically called by the \mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_server}{Server}} class after add\+Plugin.


\begin{DoxyParams}[1]{Parameter}
D\+A\+V\textbackslash{}\+Server & {\em \$server} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
void 
\end{DoxyReturn}


Definiert in Zeile 58 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a5207b64136f89db34b5290f1c342e603}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a5207b64136f89db34b5290f1c342e603}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!lock\+Node@{lock\+Node}}
\index{lock\+Node@{lock\+Node}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{lock\+Node()}{lockNode()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::lock\+Node (\begin{DoxyParamCaption}\item[{}]{\$uri,  }\item[{\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}}}]{\$lock\+Info }\end{DoxyParamCaption})}

Locks a uri

All the locking information is supplied in the lock\+Info object. The object has a suggested timeout, but this can be safely ignored It is important that if the existing timeout is ignored, the property is overwritten, as this needs to be sent back to the client


\begin{DoxyParams}[1]{Parameter}
string & {\em \$uri} & \\
\hline
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} & {\em \$lock\+Info} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
bool 
\end{DoxyReturn}


Definiert in Zeile 337 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aad312df12435131521a106b077616415}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aad312df12435131521a106b077616415}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!parse\+Lock\+Request@{parse\+Lock\+Request}}
\index{parse\+Lock\+Request@{parse\+Lock\+Request}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{parse\+Lock\+Request()}{parseLockRequest()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::parse\+Lock\+Request (\begin{DoxyParamCaption}\item[{}]{\$body }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Parses a webdav lock xml body, and returns a new Sabre object


\begin{DoxyParams}[1]{Parameter}
string & {\em \$body} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} 
\end{DoxyReturn}


Definiert in Zeile 551 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a8859c5c4f2eae58c6a6285071f6a0e87}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a8859c5c4f2eae58c6a6285071f6a0e87}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!prop\+Find@{prop\+Find}}
\index{prop\+Find@{prop\+Find}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{prop\+Find()}{propFind()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::prop\+Find (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_prop_find}{D\+A\+V\textbackslash{}\+Prop\+Find}}}]{\$prop\+Find,  }\item[{\mbox{\hyperlink{interface_sabre_1_1_d_a_v_1_1_i_node}{D\+A\+V\textbackslash{}\+I\+Node}}}]{\$node }\end{DoxyParamCaption})}

This method is called after most properties have been found it allows us to add in any Lock-\/related properties


\begin{DoxyParams}[1]{Parameter}
D\+A\+V\textbackslash{}\+Prop\+Find & {\em \$prop\+Find} & \\
\hline
D\+A\+V\textbackslash{}\+I\+Node & {\em \$node} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
void 
\end{DoxyReturn}


Definiert in Zeile 94 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a20c60a46f1836df762a90b741c8672a6}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_a20c60a46f1836df762a90b741c8672a6}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!unlock\+Node@{unlock\+Node}}
\index{unlock\+Node@{unlock\+Node}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{unlock\+Node()}{unlockNode()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::unlock\+Node (\begin{DoxyParamCaption}\item[{}]{\$uri,  }\item[{\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}}}]{\$lock\+Info }\end{DoxyParamCaption})}

Unlocks a uri

This method removes a lock from a uri. It is assumed all the supplied information is correct and verified


\begin{DoxyParams}[1]{Parameter}
string & {\em \$uri} & \\
\hline
\mbox{\hyperlink{class_sabre_1_1_d_a_v_1_1_locks_1_1_lock_info}{Lock\+Info}} & {\em \$lock\+Info} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
bool 
\end{DoxyReturn}


Definiert in Zeile 353 der Datei Plugin.\+php.

\mbox{\Hypertarget{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aedbf55fbe92f575adf935b9070a43688}\label{class_sabre_1_1_d_a_v_1_1_locks_1_1_plugin_aedbf55fbe92f575adf935b9070a43688}} 
\index{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}!validate\+Tokens@{validate\+Tokens}}
\index{validate\+Tokens@{validate\+Tokens}!Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin@{Sabre\+::\+D\+A\+V\+::\+Locks\+::\+Plugin}}
\subsubsection{\texorpdfstring{validate\+Tokens()}{validateTokens()}}
{\footnotesize\ttfamily Sabre\textbackslash{}\+D\+A\+V\textbackslash{}\+Locks\textbackslash{}\+Plugin\+::validate\+Tokens (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{interface_sabre_1_1_h_t_t_p_1_1_request_interface}{Request\+Interface}}}]{\$request,  }\item[{\&}]{\$conditions }\end{DoxyParamCaption})}

The validate\+Tokens event is triggered before every request.

It\textquotesingle{}s a moment where this plugin can check all the supplied lock tokens in the If\+: header, and check if they are valid.

In addition, it will also ensure that it checks any missing lokens that must be present in the request, and reject requests without the proper tokens.


\begin{DoxyParams}[1]{Parameter}
Request\+Interface & {\em \$request} & \\
\hline
mixed & {\em \$conditions} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Rückgabe}
void 
\end{DoxyReturn}


Definiert in Zeile 416 der Datei Plugin.\+php.



Die Dokumentation für diese Klasse wurde erzeugt aufgrund der Datei\+:\begin{DoxyCompactItemize}
\item 
Upload/framework/lib/webdav/\+Sabre\+D\+A\+V/vendor/sabre/dav/lib/\+D\+A\+V/\+Locks/Plugin.\+php\end{DoxyCompactItemize}
